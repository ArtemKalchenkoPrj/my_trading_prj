# AI Asset Price Prediction with LangGraph

Цей проєкт реалізує LangGraph-пайплайн для передбачення ціни фінансового активу на заданий часовий горизонт із використанням:

- LLM
- новинного аналізу (Tavily Search)
- метрик ринку
- векторної бази даних (ChromaDB)
- системи ітеративної впевненості моделі

## Модель приймає рішення у форматі:

BUY | HOLD | SELL
І ітеративно підвищує свою впевненість до досягнення граничного значення.

## Архітектура

Пайплайн побудований у вигляді LangGraph-графа, що складається з наступних нод:

### GetNextDataSource

LLM, яка оцінює, якого типу дані є релевантними для подальшого аналізу: новини за активом чи метрики, які базуються на ціні активу за певний проміжок часу.

### GetIndicators

LLM, яка вирішує, який індикатор є важливим, і обирає його. Разом із цим робить запит до ChromaDB, щоб дізнатися більше про використання певної метрики в індикаторі.
Метою цього є покращення можливостей LLM щодо інтерпретації числових даних, отриманих в індикаторі. Індикатори мають 2 типи: Volatility та Trend, відповідно до призначення.

Індикатор Volatility має в собі 2 метрики:

- BollingerBands
- KeltnerChannel

Індикатор Trend має в собі 3 метрики:

- EMA
- SMA
- Ціна активу за певний проміжок часу

### Interpreter

Головний мозок графа — бере всю отриману інформацію: новини, метрики, дані з БД і намагається дати оптимальну відповідь на основі цього.
Відповіддю є словник із 3 ключів: BUY, HOLD, SELL. Значеннями словника є значення впевненості моделі у своєму виборі.

На ці значення впевненості накладено певні обмеження:

- Each confidence must be between 0.1 and 0.7
- Sum of all confidences must be <= 1.0
- Exactly one action must have confidence >= 0.5

Такий підхід спрямований на те, щоб модель робила висновки, ґрунтуючись як на старих даних, так і на нових, при цьому не намагалася вгадати з першого разу і не потрапляла в нескінченний цикл.

Кінцевий граф має такий вигляд:

![Зображення графу](https://github.com/ArtemKalchenkoPrj/my_trading_prj/blob/main/my_trading_prj/flow.png)

